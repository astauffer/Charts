<html>
<head>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  <script type="text/javascript" src="https://vega.github.io/vega/vega.min.js"></script>
  <script type="text/javascript" src="https://npmcdn.com/arcgis-cedar/dist/cedar.js"></script>
</head>
<body>

<div class="row">
  <div style="width: 450px; height: 500px" id="chart"></div>

</div>

<script>
//create a cedar chart
var chart = new Cedar({"type": "bar-horizontal"});

//create the dataset w/ mappings
var dataset = {
  "url":"https://services.arcgis.com/uDTUpUPbk8X8mXwl/arcgis/rest/services/Public_Schools_in_Onondaga_County/FeatureServer/0",
  "query": {
    "groupByFieldsForStatistics": "Zip",
    "outStatistics": [{
      "statisticType": "sum",
      "onStatisticField": "Number_of",
      "outStatisticFieldName": "Number_of_SUM"
    }]
  },
  "mappings":{
    "x": {"field":"Zip","label":"ZIP Code"},
    "y": {"field":"Number_of","label":"Total Students"}
  }
};

//assign to the chart
chart.dataset = dataset;

// fix placement of axes labels
chart.override = {
  "axes": [
    {
      "titleOffset": 25,
      "title": "Total Number of Students"
    },
    {
      "titleOffset": 50
    }
  ]
};

//show the chart
chart.show({
  elementId: "#chart"
});
</script>
</body>
</html>
