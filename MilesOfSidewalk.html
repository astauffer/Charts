<html>
<head>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  <script type="text/javascript" src="https://vega.github.io/vega/vega.min.js"></script>
  <script type="text/javascript" src="https://npmcdn.com/arcgis-cedar/dist/cedar.js"></script>
</head>
<body>

<div class="row">
  <div style="width: 300px; height: 300px" id="chart"></div>

</div>

<script>
<h1>Time Example</h1>

<div id="cedar-tooltip" class="cedar-tooltip" style="display: none"></div>

<div id="chart"></div>

{{#markdown}}
```js

  var chart = new Cedar({"type":"time"});

  var dataset = {
    "url":"http://services.arcgis.com/bkrWlSKcjUDFDtgw/arcgis/rest/services/It's_a_Tornado_Map/FeatureServer/0",
    "mappings":{
      "time": {"field":"Date"},
      "value": {"field":"Injuries"},
      "sort":"Date"

    }
  };
  var tooltip = {
    "title": "{Year}",
    "content": "{Injuries} injuries<br/>{Fatalities} fatalities"
  };

  chart.dataset = dataset;
  //chart.dataset.mappings.sort = "DATE";
  chart.show({
    elementId: "#chart",
  });

  chart.on('mouseover', function(event,data){
    console.log("event", event);
    console.log("data", data);

      var cedartip = document.getElementById('cedar-tooltip');
      cedartip.style.top = event.pageY + "px";
      cedartip.style.left = event.pageX + "px";
      cedartip.style.display = "block";
      var content = "<span class='title'>" + tooltip.title + "</span><br />";
      content += "<p class='content'>" + tooltip.content + "</p>";

      cedartip.innerHTML = content.replace( /\{(\w+)\}/g, function replacer(match, $1){
        return data[$1];
      } );
    });
  chart.on('mouseout', function(event,data){
      var tooltip = document.getElementById('cedar-tooltip');
      tooltip.style.top = event.pageY+10 + "px";
      tooltip.style.left = event.pageX+10 + "px";
      tooltip.style.display = "none";
    })

```
{{/markdown}}
<script>

  var chart = new Cedar({"type":"time"});

  var dataset = {
    "url":"http://services.arcgis.com/bkrWlSKcjUDFDtgw/arcgis/rest/services/It's_a_Tornado_Map/FeatureServer/0",
    "mappings":{
      "time": {"field":"Date"},
      "value": {"field":"Injuries"},
      "sort":"Date"

    }
  };
  var tooltip = {
    "title": "{Year}",
    "content": "{Injuries} injuries<br/>{Fatalities} fatalities"
  };

  chart.dataset = dataset;
  //chart.dataset.mappings.sort = "DATE";
  chart.show({
    elementId: "#chart",
  });

  chart.on('mouseover', function(event,data){
    console.log("event", event);
    console.log("data", data);

      var cedartip = document.getElementById('cedar-tooltip');
      cedartip.style.top = event.pageY + "px";
      cedartip.style.left = event.pageX + "px";
      cedartip.style.display = "block";
      var content = "<span class='title'>" + tooltip.title + "</span><br />";
      content += "<p class='content'>" + tooltip.content + "</p>";

      cedartip.innerHTML = content.replace( /\{(\w+)\}/g, function replacer(match, $1){
        return data[$1];
      } );
    });
  chart.on('mouseout', function(event,data){
      var tooltip = document.getElementById('cedar-tooltip');
      tooltip.style.top = event.pageY+10 + "px";
      tooltip.style.left = event.pageX+10 + "px";
      tooltip.style.display = "none";
    })

</script>

</body>
</html>
